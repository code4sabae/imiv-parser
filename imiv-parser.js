!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():t.IMIVParser=r()}(this,function(){"use strict";function de(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,de)}return function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(de,Error),de.buildMessage=function(t,r){var e,a={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?c(t.parts[r][0])+"-"+c(t.parts[r][1]):c(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function c(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var r,e,n,u=new Array(t.length);for(r=0;r<t.length;r++)u[r]=(n=t[r],a[n.type](n));if(u.sort(),0<u.length){for(e=r=1;r<u.length;r++)u[r-1]!==u[r]&&(u[e]=u[r],e++);u.length=e}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+((e=r)?'"'+u(e)+'"':"end of input")+" found."},{SyntaxError:de,parse:function(M,t){t=void 0!==t?t:{};var r,k={},e={start:Vr},n=Vr,u="\ufeff",a=$r("\ufeff",!1),T=function(t){return t},d=";",A=$r(";",!1),v=function(t,r){return 0<t.length&&(r.metadata=t),r},i="vocabulary",f=$r("vocabulary",!1),s=function(t){return{type:"vocabulary",data:t}},g="deprecated",y=$r("deprecated",!1),C="class",x=$r("class",!1),F=function(t,r,e){var n=r;return n.type="class",e&&(n.restriction=[e]),t&&(n.deprecated=!0),n},$="{",_=$r("{",!1),q="}",B=$r("}",!1),c="property",o=$r("property",!1),l=function(t,r,e){var n=r;return n.type="property",e&&0<e.length&&(n.restriction=e),t&&(n.deprecated=!0),n},h="set",p=$r("set",!1),P=">",U=$r(">",!1),m=function(t,r,e,n){var u={type:"set",class:r,property:e};return 0<n.length&&(u.restriction=n),t&&(u.deprecated=!0),u},b="datamodel",j=$r("datamodel",!1),D=function(){return{type:"datamodel"}},E="use",w=$r("use",!1),S=function(t,r){var e={type:"use",class:t};if(0<r.length){for(var n=t;n.next;)n=n.next;n.restriction=r}return e},z=function(t,r,e,n){var u={type:t,data:n};return r&&(u.group=r),e&&(u.language=e),u},R=function(t,r,e,n){var u=n;return u.type=t,r&&(u.group=r),e&&(u.language=e),u},Z=function(t,r){return t.data=r,t},V=function(t){return{type:"pattern",data:t}},G="..",H=$r("..",!1),J=function(t,r){return{type:"cardinality",min:t,max:r}},K="n",L=$r("n",!1),N=function(t){return{type:"cardinality",min:t}},I="@",O=$r("@",!1),Q=function(t){return t.type="type",t},W="=",X=$r("=",!1),Y=function(t){return{type:"eq",data:t}},tt=function(t){return{type:"gt",data:t}},rt=">=",et=$r(">=",!1),nt=function(t){return{type:"ge",data:t}},ut="<",at=$r("<",!1),ct=function(t){return{type:"lt",data:t}},ot="<=",it=$r("<=",!1),ft=function(t){return{type:"le",data:t}},st="$",lt=$r("$",!1),ht=function(t){return{type:"charset",data:t}},pt="#",dt=$r("#",!1),At=function(t){return{type:"order",data:t}},vt=function(t,r,e){return r&&(t.next=r),e&&(t.language=e),t},gt=function(t,r){return r&&(t.group=r),t},yt=":",Ct=$r(":",!1),xt=function(t){return{prefix:t}},Ft=function(t,r){return t.name=r,t},mt="[",bt=$r("[",!1),jt=/^[^\]]/,Dt=_r(["]"],!0,!1),Et="]",wt=$r("]",!1),St=function(t){return t.join("")},zt=function(t,r){return r&&(t.next=r),t},Rt=function(t,r){return{prefix:t,name:r}},Zt=function(t){return t||"description"},It="/*",Mt=$r("/*",!1),kt=/^[^*]/,Tt=_r(["*"],!0,!1),$t="*/",_t=$r("*/",!1),qt=function(t){return t.join("").trim()},Bt="*",Pt=$r("*",!1),Ut=/^[^\/]/,Vt=_r(["/"],!0,!1),Gt=function(t){return"*"+t},Ht="//",Jt=$r("//",!1),Kt=/^[^\n]/,Lt=_r(["\n"],!0,!1),Nt=function(t){return t.join("").trim()},Ot='"',Qt=$r('"',!1),Wt=/^[^"]/,Xt=_r(['"'],!0,!1),Yt=function(t){return t.join("")},tr='\\"',rr=$r('\\"',!1),er=function(){return'"'},nr="'",ur=$r("'",!1),ar=/^[^']/,cr=_r(["'"],!0,!1),or="\\'",ir=$r("\\'",!1),fr=function(){return"'"},sr=function(t){return parseInt(t.join(""))},lr="/",hr=$r("/",!1),pr="\\/",dr=$r("\\/",!1),Ar=function(){return"/"},vr=function(t,r){return t+(r?r.join(""):"")},gr=function(t,r){return t+r},yr=/^[a-zA-Z_\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Cr=_r([["a","z"],["A","Z"],"_",["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),xr=/^[.\-0-9\xB7\u0300-\u036F\u203F-\u2040]/,Fr=_r([".","-",["0","9"],"·",["̀","ͯ"],["‿","⁀"]],!1,!1),mr=/^[0-9]/,br=_r([["0","9"]],!1,!1),jr="\n",Dr=$r("\n",!1),Er={type:"any"},wr=(_r(["\t","\n","\r",[" ","퟿"],["","�"]],!1,!1),/^[a-zA-Z]/),Sr=_r([["a","z"],["A","Z"]],!1,!1),zr=/^[ \t\r\n\f]/,Rr=_r([" ","\t","\r","\n","\f"],!1,!1),Zr=0,Ir=[{line:1,column:1}],Mr=0,kr=[],Tr=0;if("startRule"in t){if(!(t.startRule in e))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=e[t.startRule]}function $r(t,r){return{type:"literal",text:t,ignoreCase:r}}function _r(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function qr(t){var r,e=Ir[t];if(e)return e;for(r=t-1;!Ir[r];)r--;for(e={line:(e=Ir[r]).line,column:e.column};r<t;)10===M.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Ir[t]=e}function Br(t,r){var e=qr(t),n=qr(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Pr(t){Zr<Mr||(Mr<Zr&&(Mr=Zr,kr=[]),kr.push(t))}function Ur(t,r,e){return new de(de.buildMessage(t,r),t,r,e)}function Vr(){var t,r,e,n;if(t=Zr,65279===M.charCodeAt(Zr)?(r=u,Zr++):(r=k,0===Tr&&Pr(a)),r===k&&(r=null),r!==k){for(e=[],n=Gr();n!==k;)e.push(n),n=Gr();t=e!==k&&(n=pe())!==k?r=T(e):(Zr=t,k)}else Zr=t,t=k;return t}function Gr(){var t;return(t=function(){var t,r,e,n,u,a,c,o;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k?(a=Zr,(n=a=pe()!==k?(M.substr(Zr,10)===i?(c=i,Zr+=10):(c=k,0===Tr&&Pr(f)),c!==k&&pe()!==k&&(o=ne())!==k?s(o):(Zr=a,k)):(Zr=a,k))!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n,u,a,c;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k?(a=Zr,(n=a=pe()!==k?(M.substr(Zr,9)===b?(c=b,Zr+=9):(c=k,0===Tr&&Pr(j)),c!==k?D():(Zr=a,k)):(Zr=a,k))!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n,u,a,c,o,i,f,s,l,h,p;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k?(a=Zr,(n=a=pe()!==k?(M.substr(Zr,10)===g?(c=g,Zr+=10):(c=k,0===Tr&&Pr(y)),c===k&&(c=null),c!==k&&pe()!==k?(M.substr(Zr,5)===C?(o=C,Zr+=5):(o=k,0===Tr&&Pr(x)),o!==k&&pe()!==k&&(i=Or())!==k&&pe()!==k?(s=Zr,(f=s=pe()!==k?(123===M.charCodeAt(Zr)?(l=$,Zr++):(l=k,0===Tr&&Pr(_)),l!==k&&(h=Kr())!==k&&pe()!==k?(125===M.charCodeAt(Zr)?(p=q,Zr++):(p=k,0===Tr&&Pr(B)),p!==k?T(h):(Zr=s,k)):(Zr=s,k)):(Zr=s,k))===k&&(f=null),f!==k?F(c,i,f):(Zr=a,k)):(Zr=a,k)):(Zr=a,k)):(Zr=a,k))!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n,u;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k&&(n=function(){var t,r,e,n,u,a;if(t=Zr,pe()!==k)if(M.substr(Zr,10)===g?(r=g,Zr+=10):(r=k,0===Tr&&Pr(y)),r===k&&(r=null),r!==k)if(pe()!==k)if(M.substr(Zr,8)===c?(e=c,Zr+=8):(e=k,0===Tr&&Pr(o)),e!==k)if(pe()!==k)if((n=Wr())!==k)if(pe()!==k){for(u=[],a=Jr();a!==k;)u.push(a),a=Jr();t=u!==k?l(r,n,u):(Zr=t,k)}else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;return t}())!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n,u;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k&&(n=function(){var t,r,e,n,u,a,c,o;if(t=Zr,pe()!==k)if(M.substr(Zr,10)===g?(r=g,Zr+=10):(r=k,0===Tr&&Pr(y)),r===k&&(r=null),r!==k)if(pe()!==k)if(M.substr(Zr,3)===h?(e=h,Zr+=3):(e=k,0===Tr&&Pr(p)),e!==k)if(pe()!==k)if((n=Or())!==k)if(pe()!==k)if(62===M.charCodeAt(Zr)?(u=P,Zr++):(u=k,0===Tr&&Pr(U)),u!==k)if(pe()!==k)if((a=Wr())!==k)if(pe()!==k){for(c=[],o=Jr();o!==k;)c.push(o),o=Jr();t=c!==k?m(r,n,a,c):(Zr=t,k)}else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;return t}())!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n,u;if(t=Zr,pe()!==k){for(r=[],e=Hr();e!==k;)r.push(e),e=Hr();t=r!==k&&(e=pe())!==k&&(n=function(){var t,r,e,n,u,a,c,o,i;if(t=Zr,pe()!==k)if(M.substr(Zr,3)===E?(r=E,Zr+=3):(r=k,0===Tr&&Pr(w)),r!==k)if(pe()!==k)if(a=Zr,(e=a=pe()!==k&&(c=Lr())!==k&&pe()!==k?((o=function t(){var r,e,n,u,a,c,o,i;return r=Zr,e=pe(),r=e!==k?(62===M.charCodeAt(Zr)?(n=P,Zr++):(n=k,0===Tr&&Pr(U)),n!==k&&pe()!==k?(c=Zr,(u=c=pe()!==k&&(o=Wr())!==k&&pe()!==k?((i=Qr())===k&&(i=null),i!==k?gt(o,i):(Zr=c,k)):(Zr=c,k))!==k&&pe()!==k?((a=t())===k&&(a=null),a!==k?e=zt(u,a):(Zr=r,k)):(Zr=r,k)):(Zr=r,k)):(Zr=r,k)}())===k&&(o=null),o!==k&&pe()!==k?((i=Xr())===k&&(i=null),i!==k?vt(c,o,i):(Zr=a,k)):(Zr=a,k)):(Zr=a,k))!==k)if(pe()!==k){for(n=[],u=Jr();u!==k;)n.push(u),u=Jr();t=n!==k?S(e,n):(Zr=t,k)}else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;else Zr=t,t=k;return t}())!==k&&pe()!==k?(59===M.charCodeAt(Zr)?(u=d,Zr++):(u=k,0===Tr&&Pr(A)),u!==k?v(r,n):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}()),t}function Hr(){var t,r,e,n,u,a,c,o;return t=Zr,(t=pe()!==k&&(r=Yr())!==k&&pe()!==k?((e=Qr())===k&&(e=null),e!==k&&pe()!==k?((n=Xr())===k&&(n=null),n!==k&&pe()!==k&&(u=ne())!==k?z(r,e,n,u):(Zr=t,k)):(Zr=t,k)):(Zr=t,k))===k&&(t=Zr,t=pe()!==k&&(r=Yr())!==k&&pe()!==k?((e=Qr())===k&&(e=null),e!==k&&pe()!==k?((n=Xr())===k&&(n=null),n!==k&&pe()!==k&&(a=Zr,(u=a=pe()!==k&&(c=Nr())!==k&&pe()!==k&&(o=ne())!==k?Z(c,o):(Zr=a,k))!==k)?R(r,e,n,u):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)),t}function Jr(){var t,r,e,n,u,a,c,o,i,f,s,l,h,p,d,A,v,g,y,C,x,F,m,b,j,D,E,w,S,z,R,Z,I;return t=Zr,t=pe()!==k?(123===M.charCodeAt(Zr)?(r=$,Zr++):(r=k,0===Tr&&Pr(_)),r!==k&&(Z=Zr,(u=Z=pe()!==k&&(I=function(){var t,r,e,n;if(t=Zr,47===M.charCodeAt(Zr)?(r=lr,Zr++):(r=k,0===Tr&&Pr(hr)),r!==k){for(e=[],(n=oe())===k&&(Ut.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Vt)));n!==k;)e.push(n),(n=oe())===k&&(Ut.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Vt)));t=e!==k?(47===M.charCodeAt(Zr)?(n=lr,Zr++):(n=k,0===Tr&&Pr(hr)),n!==k?r=Yt(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())!==k?V(I):(Zr=Z,k))===k&&(E=Zr,(E=(w=pe())!==k&&(S=ce())!==k&&pe()!==k?(M.substr(Zr,2)===G?(z=G,Zr+=2):(z=k,0===Tr&&Pr(H)),z!==k&&pe()!==k&&(R=ce())!==k?w=J(S,R):(Zr=E,k)):(Zr=E,k))===k&&(E=Zr,w=pe(),E=w!==k&&(S=ce())!==k&&pe()!==k?(M.substr(Zr,2)===G?(z=G,Zr+=2):(z=k,0===Tr&&Pr(H)),z!==k&&pe()!==k?(110===M.charCodeAt(Zr)?(R=K,Zr++):(R=k,0===Tr&&Pr(L)),R!==k?w=N(S):(Zr=E,k)):(Zr=E,k)):(Zr=E,k)),(u=E)===k)&&(u=Kr())===k&&(b=Zr,(u=b=pe()!==k?(61===M.charCodeAt(Zr)?(j=W,Zr++):(j=k,0===Tr&&Pr(X)),j!==k&&pe()!==k?((D=ce())===k&&(D=ne()),D!==k?Y(D):(Zr=b,k)):(Zr=b,k)):(Zr=b,k))===k)&&(x=Zr,(u=x=pe()!==k?(62===M.charCodeAt(Zr)?(F=P,Zr++):(F=k,0===Tr&&Pr(U)),F!==k&&pe()!==k&&(m=ce())!==k?tt(m):(Zr=x,k)):(Zr=x,k))===k)&&(g=Zr,(u=g=pe()!==k?(M.substr(Zr,2)===rt?(y=rt,Zr+=2):(y=k,0===Tr&&Pr(et)),y!==k&&pe()!==k&&(C=ce())!==k?nt(C):(Zr=g,k)):(Zr=g,k))===k)&&(d=Zr,(u=d=pe()!==k?(60===M.charCodeAt(Zr)?(A=ut,Zr++):(A=k,0===Tr&&Pr(at)),A!==k&&pe()!==k&&(v=ce())!==k?ct(v):(Zr=d,k)):(Zr=d,k))===k)&&(l=Zr,(u=l=pe()!==k?(M.substr(Zr,2)===ot?(h=ot,Zr+=2):(h=k,0===Tr&&Pr(it)),h!==k&&pe()!==k&&(p=ce())!==k?ft(p):(Zr=l,k)):(Zr=l,k))===k)&&(i=Zr,(u=i=pe()!==k?(36===M.charCodeAt(Zr)?(f=st,Zr++):(f=k,0===Tr&&Pr(lt)),f!==k&&pe()!==k&&(s=ne())!==k?ht(s):(Zr=i,k)):(Zr=i,k))===k)&&(a=Zr,u=a=pe()!==k?(35===M.charCodeAt(Zr)?(c=pt,Zr++):(c=k,0===Tr&&Pr(dt)),c!==k&&pe()!==k&&(o=ce())!==k?At(o):(Zr=a,k)):(Zr=a,k)),(e=u)!==k)&&pe()!==k?(125===M.charCodeAt(Zr)?(n=q,Zr++):(n=k,0===Tr&&Pr(B)),n!==k?T(e):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)}function Kr(){var t,r,e;return t=Zr,t=pe()!==k?(64===M.charCodeAt(Zr)?(r=I,Zr++):(r=k,0===Tr&&Pr(O)),r!==k&&pe()!==k&&(e=Lr())!==k?Q(e):(Zr=t,k)):(Zr=t,k)}function Lr(){var t,r,e;return t=Zr,t=pe()!==k&&(r=Or())!==k&&pe()!==k?((e=Qr())===k&&(e=null),e!==k?gt(r,e):(Zr=t,k)):(Zr=t,k)}function Nr(){var t,r,e;return t=Zr,t=(r=ie())!==k&&pe()!==k?(58===M.charCodeAt(Zr)?(e=yt,Zr++):(e=k,0===Tr&&Pr(Ct)),e!==k?r=xt(r):(Zr=t,k)):(Zr=t,k)}function Or(){var t,r,e;return t=Zr,t=pe()!==k&&(r=Nr())!==k&&pe()!==k&&(e=ie())!==k?Ft(r,e):(Zr=t,k)}function Qr(){var t,r;return t=Zr,t=pe()!==k&&(r=function(){var t,r,e,n;if(t=Zr,91===M.charCodeAt(Zr)?(r=mt,Zr++):(r=k,0===Tr&&Pr(bt)),r!==k){if(e=[],jt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Dt)),n!==k)for(;n!==k;)e.push(n),jt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Dt));else e=k;t=e!==k?(93===M.charCodeAt(Zr)?(n=Et,Zr++):(n=k,0===Tr&&Pr(wt)),n!==k?r=St(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())!==k?T(r):(Zr=t,k)}function Wr(){var t,r,e,n;return t=Zr,t=pe()!==k&&(r=ie())!==k&&pe()!==k?(58===M.charCodeAt(Zr)?(e=yt,Zr++):(e=k,0===Tr&&Pr(Ct)),e!==k&&pe()!==k&&(n=ie())!==k?Rt(r,n):(Zr=t,k)):(Zr=t,k)}function Xr(){var t,r,e,n,u,a;return t=Zr,t=pe()!==k?(64===M.charCodeAt(Zr)?(r=I,Zr++):(r=k,0===Tr&&Pr(O)),r!==k&&pe()!==k&&(n=Zr,(e=n=(u=he())!==k&&(a=he())!==k?u=gr(u,a):(Zr=n,k))!==k)?T(e):(Zr=t,k)):(Zr=t,k)}function Yr(){var t,r,e;return t=Zr,t=pe()!==k?(35===M.charCodeAt(Zr)?(r=pt,Zr++):(r=k,0===Tr&&Pr(dt)),r!==k&&pe()!==k?((e=ie())===k&&(e=null),e!==k?Zt(e):(Zr=t,k)):(Zr=t,k)):(Zr=t,k)}function te(){var t,r,e,n;if(t=Zr,M.substr(Zr,2)===It?(r=It,Zr+=2):(r=k,0===Tr&&Pr(Mt)),r!==k){for(e=[],kt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Tt)),n===k&&(n=re());n!==k;)e.push(n),kt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Tt)),n===k&&(n=re());t=e!==k?(M.substr(Zr,2)===$t?(n=$t,Zr+=2):(n=k,0===Tr&&Pr(_t)),n!==k?r=qt(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}function re(){var t,r,e;return t=Zr,42===M.charCodeAt(Zr)?(r=Bt,Zr++):(r=k,0===Tr&&Pr(Pt)),t=r!==k?(Ut.test(M.charAt(Zr))?(e=M.charAt(Zr),Zr++):(e=k,0===Tr&&Pr(Vt)),e!==k?r=Gt(e):(Zr=t,k)):(Zr=t,k)}function ee(){var t,r,e,n,u,a,c;if(t=Zr,M.substr(Zr,2)===Ht?(r=Ht,Zr+=2):(r=k,0===Tr&&Pr(Jt)),r!==k){for(e=[],Kt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Lt));n!==k;)e.push(n),Kt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Lt));t=e!==k?(10===M.charCodeAt(Zr)?(c=jr,Zr++):(c=k,0===Tr&&Pr(Dr)),(n=c)===k&&(u=Zr,Tr++,M.length>Zr?(a=M.charAt(Zr),Zr++):(a=k,0===Tr&&Pr(Er)),Tr--,n=u=a===k?void 0:(Zr=u,k)),n!==k?r=Nt(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}function ne(){var t;return(t=function(){var t,r,e,n;if(t=Zr,39===M.charCodeAt(Zr)?(r=nr,Zr++):(r=k,0===Tr&&Pr(ur)),r!==k){for(e=[],(n=ae())===k&&(ar.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(cr)));n!==k;)e.push(n),(n=ae())===k&&(ar.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(cr)));t=e!==k?(39===M.charCodeAt(Zr)?(n=nr,Zr++):(n=k,0===Tr&&Pr(ur)),n!==k?r=Yt(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}())===k&&(t=function(){var t,r,e,n;if(t=Zr,34===M.charCodeAt(Zr)?(r=Ot,Zr++):(r=k,0===Tr&&Pr(Qt)),r!==k){for(e=[],(n=ue())===k&&(Wt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Xt)));n!==k;)e.push(n),(n=ue())===k&&(Wt.test(M.charAt(Zr))?(n=M.charAt(Zr),Zr++):(n=k,0===Tr&&Pr(Xt)));t=e!==k?(34===M.charCodeAt(Zr)?(n=Ot,Zr++):(n=k,0===Tr&&Pr(Qt)),n!==k?r=Yt(e):(Zr=t,k)):(Zr=t,k)}else Zr=t,t=k;return t}()),t}function ue(){var t;return Zr,M.substr(Zr,2)===tr?(t=tr,Zr+=2):(t=k,0===Tr&&Pr(rr)),t!==k&&(t=er()),t}function ae(){var t;return Zr,M.substr(Zr,2)===or?(t=or,Zr+=2):(t=k,0===Tr&&Pr(ir)),t!==k&&(t=fr()),t}function ce(){var t,r;if(Zr,t=[],(r=le())!==k)for(;r!==k;)t.push(r),r=le();else t=k;return t!==k&&(t=sr(t)),t}function oe(){var t;return Zr,M.substr(Zr,2)===pr?(t=pr,Zr+=2):(t=k,0===Tr&&Pr(dr)),t!==k&&(t=Ar()),t}function ie(){var t,r,e,n;if(t=Zr,(r=fe())!==k){for(e=[],n=se();n!==k;)e.push(n),n=se();t=e!==k?r=vr(r,e):(Zr=t,k)}else Zr=t,t=k;return t}function fe(){var t;return yr.test(M.charAt(Zr))?(t=M.charAt(Zr),Zr++):(t=k,0===Tr&&Pr(Cr)),t}function se(){var t;return(t=fe())===k&&(xr.test(M.charAt(Zr))?(t=M.charAt(Zr),Zr++):(t=k,0===Tr&&Pr(Fr))),t}function le(){var t;return mr.test(M.charAt(Zr))?(t=M.charAt(Zr),Zr++):(t=k,0===Tr&&Pr(br)),t}function he(){var t;return wr.test(M.charAt(Zr))?(t=M.charAt(Zr),Zr++):(t=k,0===Tr&&Pr(Sr)),t}function pe(){var t,r;for(t=[],(r=te())===k&&(r=ee())===k&&(zr.test(M.charAt(Zr))?(r=M.charAt(Zr),Zr++):(r=k,0===Tr&&Pr(Rr)));r!==k;)t.push(r),(r=te())===k&&(r=ee())===k&&(zr.test(M.charAt(Zr))?(r=M.charAt(Zr),Zr++):(r=k,0===Tr&&Pr(Rr)));return t}if((r=n())!==k&&Zr===M.length)return r;throw r!==k&&Zr<M.length&&Pr({type:"end"}),Ur(kr,Mr<M.length?M.charAt(Mr):null,Mr<M.length?Br(Mr,Mr+1):Br(Mr,Mr))}}});
